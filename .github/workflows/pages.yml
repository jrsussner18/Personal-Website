name: Deploy React app to GitHub Pages
on:
  push:
    branches: [ main ]

permissions:
  contents: read
  pages: write
  id-token: write

concurrency: { group: "pages", cancel-in-progress: true }

env:
  APP_DIR: Personal-Website        # ← subfolder that has package.json
  BUILD_DIR: build                 # ← "build" for CRA, "dist" for Vite

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      
uses: actions/checkout@v4
uses: actions/setup-node@v4
    with: { node-version: '20' }
run: npm ci
  working-directory: ${{ env.APP_DIR }}
run: npm run build
working-directory: ${{ env.APP_DIR }}
uses: actions/upload-pages-artifact@v3
with: { path: ${{ env.APP_DIR }}/${{ env.BUILD_DIR }} }
deploy:
  needs: build
  runs-on: ubuntu-latest
  environment:
    name: github-pages
    url: ${{ steps.deployment.outputs.page_url }}
  steps:
id: deployment
    uses: actions/deploy-pages@v4
